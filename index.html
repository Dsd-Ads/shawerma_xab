<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–®–∞—É—Ä–º–∞ –•–∞–± –ú–µ–Ω—é</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: var(--tg-theme-bg-color, #ffffff);
            --secondary-bg: var(--tg-theme-secondary-bg-color, #f4f4f7);
            --text-color: var(--tg-theme-text-color, #000000);
            --hint-color: var(--tg-theme-hint-color, #707579);
            --button-color: var(--tg-theme-button-color, #248b91);
            --button-text: var(--tg-theme-button-text-color, #ffffff);
        }

        body {
            font-family: -apple-system, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0; padding: 0;
            overflow-x: hidden;
        }

        #app { padding: 15px; padding-bottom: 100px; }

        .category-title {
            font-size: 1.1rem; font-weight: 800; text-transform: uppercase;
            color: var(--button-color); margin: 25px 0 12px;
            border-left: 5px solid var(--button-color); padding-left: 10px;
        }

        .item-card {
            background-color: var(--secondary-bg);
            border-radius: 16px; padding: 14px; margin-bottom: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .item-header { display: flex; justify-content: space-between; align-items: flex-start; }
        .item-name { font-size: 1rem; font-weight: 700; color: var(--text-color); }
        .item-price { font-weight: 800; color: var(--button-color); margin-left: 10px; }
        .item-desc { font-size: 0.8rem; color: var(--hint-color); margin: 6px 0 12px; line-height: 1.2; }

        .controls { display: flex; justify-content: flex-end; align-items: center; }
        .qty-box { display: flex; align-items: center; background: var(--bg-color); border-radius: 10px; border: 1px solid rgba(0,0,0,0.05); }
        .btn-qty {
            background-color: var(--button-color); color: var(--button-text);
            border: none; border-radius: 8px; width: 34px; height: 34px;
            font-size: 1.2rem; font-weight: bold; cursor: pointer;
        }
        .qty-num { margin: 0 12px; font-weight: 700; font-size: 1rem; }

        .addon-section { display: none; margin-top: 12px; padding-top: 12px; border-top: 1px dashed rgba(0,0,0,0.1); }
        .addon-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        .addon-item { display: flex; align-items: center; font-size: 0.8rem; background: var(--bg-color); padding: 6px 10px; border-radius: 8px; }
        .addon-item input { margin-right: 8px; width: 16px; height: 16px; accent-color: var(--button-color); }

        textarea {
            width: 100%; margin-top: 10px; border: 1px solid rgba(0,0,0,0.1);
            border-radius: 10px; padding: 10px; font-size: 0.85rem;
            background: var(--bg-color); color: var(--text-color); box-sizing: border-box; resize: none;
        }
    </style>
</head>
<body>
    <div id="app"><div id="menu-content"></div></div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready(); tg.expand();

    const menuData = [
        {
            category: "üåØ –®–∞—É—Ä–º–∞",
            items: [
                { id: "sh_kur_st", name: "–®–∞—É—Ä–º–∞ –ö—É—Ä–∏—Ü–∞ (–°—Ç–∞–Ω–¥–∞—Ä—Ç)", price: 290, desc: "–ö—É—Ä–∏—Ü–∞, –æ–≤–æ—â–∏, —Å–æ—É—Å—ã, –∫–æ—Ä–µ–π—Å–∫–∞—è –º–æ—Ä–∫–æ–≤—å" },
                { id: "sh_kur_big", name: "–®–∞—É—Ä–º–∞ –ö—É—Ä–∏—Ü–∞ (–ë–æ–ª—å—à–∞—è)", price: 350, desc: "XL –ø–æ—Ä—Ü–∏—è –∫—É—Ä–∏—Ü—ã –∏ –æ–≤–æ—â–µ–π" },
                { id: "sh_svin_st", name: "–®–∞—É—Ä–º–∞ –°–≤–∏–Ω–∏–Ω–∞ (–°—Ç–∞–Ω–¥–∞—Ä—Ç)", price: 320, desc: "–°–≤–∏–Ω–∏–Ω–∞, –∫–∞–ø—É—Å—Ç–∞, –æ–≤–æ—â–∏, –º–∞—Ä–∏–Ω–æ–≤. –ª—É–∫" },
                { id: "sh_svin_big", name: "–®–∞—É—Ä–º–∞ –°–≤–∏–Ω–∏–Ω–∞ (–ë–æ–ª—å—à–∞—è)", price: 380, desc: "–ú–∞–∫—Å–∏ –ø–æ—Ä—Ü–∏—è —Å–æ —Å–≤–∏–Ω–∏–Ω–æ–π" },
                { id: "sh_hub", name: "üåü –®–∞—É—Ä–º–∞ –•–ê–ë", price: 390, desc: "–ö—É—Ä–∏—Ü–∞, –æ–≤–æ—â–∏ –≥—Ä–∏–ª—å, –∞–¥–∂–∏–∫–∞, —Å–æ—É—Å —Ñ–µ—Ç–∞" },
                { id: "sh_fish", name: "üêü –®–∞—É—Ä–º–∞ –°–∫—É–º–±—Ä–∏—è", price: 340, desc: "–°–∫—É–º–±—Ä–∏—è –Ω–∞ –º–∞–Ω–≥–∞–ª–µ, —Ç–µ—Ä–∏—è–∫–∏, –æ–≤–æ—â–∏" }
            ]
        },
        {
            category: "üå≠ –•–æ—Ç-–î–æ–≥–∏",
            items: [
                { id: "hd_cl", name: "–•–æ—Ç-–î–æ–≥ –ö–ª–∞—Å—Å–∏–∫", price: 190, desc: "–ë—É–ª–æ—á–∫–∞, —Å–æ—Å–∏—Å–∫–∞, –∫–µ—Ç—á—É–ø, –≥–æ—Ä—á–∏—Ü–∞, –æ–≥—É—Ä—á–∏–∫" },
                { id: "hd_fr", name: "–•–æ—Ç-–î–æ–≥ –§—Ä–µ–Ω—á", price: 210, desc: "–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π –±–∞–≥–µ—Ç, —Å–æ—Å–∏—Å–∫–∞, —Å–æ—É—Å –Ω–∞ –≤—ã–±–æ—Ä" },
                { id: "hd_big", name: "–•–æ—Ç-–î–æ–≥ XXL", price: 280, desc: "–î–≤–æ–π–Ω–∞—è —Å–æ—Å–∏—Å–∫–∞, –º–Ω–æ–≥–æ –æ–≤–æ—â–µ–π –∏ —Å–æ—É—Å–∞" }
            ]
        },
        {
            category: "üçî –ë—É—Ä–≥–µ—Ä—ã",
            items: [
                { id: "brg_black", name: "–ë—É—Ä–≥–µ—Ä –ë–ª—ç–∫", price: 460, desc: "–ß–µ—Ä–Ω–∞—è –±—É–ª–∫–∞, –∫–æ—Ç–ª–µ—Ç–∞ —Å–≤–∏–Ω–æ-–≥–æ–≤—è–∂—å—è, –æ–≤–æ—â–∏" },
                { id: "brg_tiftik", name: "–¢–∏—Ñ—Ç–∏–∫ –ë—É—Ä–≥–µ—Ä", price: 570, desc: "–†–≤–∞–Ω–∞—è –≥–æ–≤—è–¥–∏–Ω–∞, –¥–≤–æ–π–Ω–∞—è –º–æ—Ü–∞—Ä–µ–ª–ª–∞, –æ–≤–æ—â–∏" },
                { id: "brg_ch", name: "–ß–∏–∑–±—É—Ä–≥–µ—Ä", price: 320, desc: "–ö–ª–∞—Å—Å–∏–∫–∞ —Å —Å—ã—Ä–æ–º —á–µ–¥–¥–µ—Ä –∏ —Å–æ–ª–µ–Ω—ã–º –æ–≥—É—Ä—Ü–æ–º" }
            ]
        },
        {
            category: "üî• –ú–∞–Ω–≥–∞–ª",
            items: [
                { id: "m_bedro", name: "–®–∞—à–ª—ã–∫ –ö—É—Ä–∏–Ω–æ–µ –±–µ–¥—Ä–æ", price: 440, desc: "250/80 –≥ –ø–æ—Ä—Ü–∏—è" },
                { id: "m_svin", name: "–®–∞—à–ª—ã–∫ –°–≤–∏–Ω–∏–Ω–∞", price: 490, desc: "250/80 –≥ –ø–æ—Ä—Ü–∏—è" },
                { id: "m_lulya_k", name: "–õ—é–ª—è –∫—É—Ä–∏–Ω—ã–µ", price: 260, desc: "125/70 –≥ —Å–æ—á–Ω–æ–≥–æ —Ñ–∞—Ä—à–∞" },
                { id: "m_lulya_g", name: "–õ—é–ª—è –≥–æ–≤—è–∂—å–∏", price: 310, desc: "125/70 –≥ —Å –ø—Ä—è–Ω–æ—Å—Ç—è–º–∏" }
            ]
        },
        {
            category: "üç≤ –°—É–ø—ã & –°–∞–ª–∞—Ç—ã",
            items: [
                { id: "s_borsh", name: "–ë–æ—Ä—â –î–æ–º–∞—à–Ω–∏–π", price: 250, desc: "–° –≥–æ–≤—è–¥–∏–Ω–æ–π –∏ —Å–º–µ—Ç–∞–Ω–æ–π, 300 –º–ª" },
                { id: "s_sol", name: "–°–æ–ª—è–Ω–∫–∞", price: 280, desc: "–ú—è—Å–Ω–∞—è —Å–±–æ—Ä–Ω–∞—è, 300 –º–ª" },
                { id: "sl_cezar", name: "–¶–µ–∑–∞—Ä—å —Å –∫—É—Ä–∏—Ü–µ–π", price: 360, desc: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–∞–ª–∞—Ç —Å –≥—Ä–µ–Ω–∫–∞–º–∏" },
                { id: "sl_bowl", name: "–ë–æ—É–ª —Å –ª–æ—Å–æ—Å–µ–º", price: 480, desc: "–†–∏—Å, –ª–æ—Å–æ—Å—å, –∞–≤–æ–∫–∞–¥–æ, —á—É–∫–∞, –±–æ–±—ã" }
            ]
        },
        {
            category: "üçü –ó–∞–∫—É—Å–∫–∏",
            items: [
                { id: "z_fri", name: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –§—Ä–∏", price: 130, desc: "100 –≥ –ø–æ—Ä—Ü–∏—è" },
                { id: "z_nag", name: "–ù–∞–≥–≥–µ—Ç—Å—ã", price: 180, desc: "6 —à—Ç –∫—É—Ä–∏–Ω–æ–≥–æ —Ñ–∏–ª–µ" },
                { id: "z_cheese", name: "–°—ã—Ä–Ω—ã–µ –ø–∞–ª–æ—á–∫–∏", price: 220, desc: "5 —à—Ç —Å —Å–æ—É—Å–æ–º" }
            ]
        },
        {
            category: "üéÅ –ö–æ–º–±–æ –û–±–µ–¥—ã",
            items: [
                { id: "c1", name: "–ö–æ–º–±–æ ‚Ññ1 (–•–æ—Ç-–¥–æ–≥)", price: 500, desc: "–•–æ—Ç-–¥–æ–≥, —Ñ—Ä–∏, —Å–æ—É—Å, –Ω–∞–ø–∏—Ç–æ–∫" },
                { id: "c2", name: "–ö–æ–º–±–æ ‚Ññ2 (–ë—É—Ä–≥–µ—Ä)", price: 650, desc: "–ë—É—Ä–≥–µ—Ä –ë–ª—ç–∫, —Ñ—Ä–∏, —Å–æ—É—Å, –Ω–∞–ø–∏—Ç–æ–∫" },
                { id: "c3", name: "–ö–æ–º–±–æ ‚Ññ3 (–®–∞—É—Ä–º–∞)", price: 520, desc: "–®–∞—É—Ä–º–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç, —Ñ—Ä–∏, —Å–æ—É—Å, –Ω–∞–ø–∏—Ç–æ–∫" }
            ]
        },
        {
            category: "ü•§ –ù–∞–ø–∏—Ç–∫–∏",
            items: [
                { id: "n_lim", name: "–õ–∏–º–æ–Ω–∞–¥", price: 170, desc: "–í –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–µ, 350 –º–ª" },
                { id: "n_cofe", name: "–ö–æ—Ñ–µ –õ–∞—Ç—Ç–µ", price: 220, desc: "–ó–µ—Ä–Ω–æ–≤–æ–π, 220 –º–ª" },
                { id: "n_tea", name: "–ß–∞–π –∞–≤—Ç–æ—Ä—Å–∫–∏–π", price: 150, desc: "300 –º–ª" }
            ]
        }
    ];

    const addons = [
        { n: "üßÄ –°—ã—Ä", p: 40 },
        { n: "üî• –•–∞–ª–∞–ø–µ–Ω—å–æ", p: 30 },
        { n: "üçü –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å", p: 30 },
        { n: "ü•í –û–≥—É—Ä–µ—Ü –º–∞—Ä.", p: 20 }
    ];

    let cart = {};

    function initMenu() {
        const container = document.getElementById('menu-content');
        menuData.forEach(cat => {
            const catEl = document.createElement('div');
            catEl.innerHTML = `<div class="category-title">${cat.category}</div>`;
            cat.items.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'item-card';
                itemEl.id = `card-${item.id}`;
                itemEl.innerHTML = `
                    <div class="item-header">
                        <div class="item-name">${item.name}</div>
                        <div class="item-price">${item.price}‚ÇΩ</div>
                    </div>
                    <div class="item-desc">${item.desc}</div>
                    <div class="controls"><div class="qty-box">
                        <button class="btn-qty" onclick="changeQty('${item.id}', -1, ${item.price})">‚àí</button>
                        <div class="qty-num" id="qty-${item.id}">0</div>
                        <button class="btn-qty" onclick="changeQty('${item.id}', 1, ${item.price})">+</button>
                    </div></div>
                    <div class="addon-section" id="addons-${item.id}">
                        <div class="addon-grid">${addons.map(a => `<div class="addon-item"><input type="checkbox" class="cb" data-n="${a.n}" data-p="${a.p}" onchange="updateTotal()"><span>${a.n} (+${a.p}‚ÇΩ)</span></div>`).join('')}</div>
                        <textarea id="comm-${item.id}" placeholder="–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–±–µ–∑ –ª—É–∫–∞ –∏ —Ç.–¥.)"></textarea>
                    </div>`;
                catEl.appendChild(itemEl);
            });
            container.appendChild(catEl);
        });
    }

    function changeQty(id, delta, price) {
        if (!cart[id]) cart[id] = { qty: 0, price: price };
        cart[id].qty += delta;
        if (cart[id].qty < 0) cart[id].qty = 0;
        document.getElementById(`qty-${id}`).innerText = cart[id].qty;
        document.getElementById(`addons-${id}`).style.display = cart[id].qty > 0 ? 'block' : 'none';
        updateTotal();
    }

    function updateTotal() {
        let total = 0; let orderData = [];
        for (const id in cart) {
            if (cart[id].qty > 0) {
                let itemTotal = cart[id].qty * cart[id].price;
                const card = document.getElementById(`card-${id}`);
                const selectedAddons = [];
                card.querySelectorAll('.cb:checked').forEach(cb => {
                    itemTotal += parseInt(cb.dataset.p);
                    selectedAddons.push(cb.dataset.n);
                });
                total += itemTotal;
                orderData.push({
                    name: card.querySelector('.item-name').innerText,
                    qty: cart[id].qty,
                    addons: selectedAddons,
                    comment: document.getElementById(`comm-${id}`).value
                });
            }
        }
        if (total > 0) {
            tg.MainButton.setText(`–û–§–û–†–ú–ò–¢–¨ –ó–ê–ö–ê–ó: ${total}‚ÇΩ`);
            tg.MainButton.show();
        } else { tg.MainButton.hide(); }

        tg.onEvent('mainButtonClicked', () => {
            if (orderData.length > 0) {
                tg.sendData(JSON.stringify(orderData));
                tg.close();
            }
        });
    }

    initMenu();
</script>
</body>
</html>
