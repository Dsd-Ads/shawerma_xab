<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–®–∞—É—Ä–º–∞ –•–∞–± ‚Äî –ú–µ–Ω—é</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: var(--tg-theme-bg-color, #ffffff);
            --secondary-bg: var(--tg-theme-secondary-bg-color, #f4f4f5);
            --text-color: var(--tg-theme-text-color, #000000);
            --hint-color: var(--tg-theme-hint-color, #999999);
            --link-color: var(--tg-theme-link-color, #248bed);
            --button-color: var(--tg-theme-button-color, #248b91); /* –¶–≤–µ—Ç –≤ —Å—Ç–∏–ª–µ –®–∞—É—Ä–º–∞ –•–∞–± */
            --button-text: var(--tg-theme-button-text-color, #ffffff);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0; padding: 0;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            scroll-behavior: smooth;
        }

        header {
            background-color: var(--bg-color);
            position: sticky; top: 0; z-index: 100;
            padding: 12px; text-align: center; font-weight: 600;
            border-bottom: 0.5px solid rgba(0,0,0,0.1);
        }

        .nav-tabs {
            display: flex; overflow-x: auto; background-color: var(--bg-color);
            padding: 8px 12px; gap: 8px; position: sticky; top: 45px; z-index: 99;
            border-bottom: 0.5px solid rgba(0,0,0,0.1);
        }
        .nav-tabs::-webkit-scrollbar { display: none; }

        .nav-btn {
            padding: 6px 16px; background-color: var(--secondary-bg);
            color: var(--text-color); border-radius: 16px;
            font-size: 14px; font-weight: 500; text-decoration: none;
            white-space: nowrap; transition: all 0.2s ease;
        }
        .nav-btn.active { background-color: var(--button-color); color: var(--button-text); }

        .section-anchor { scroll-margin-top: 100px; }

        .category-header {
            padding: 20px 16px 8px; font-size: 14px; font-weight: 600;
            color: var(--hint-color); text-transform: uppercase; letter-spacing: 0.5px;
        }

        /* –ë–ª–æ–∫ –≤—ã–±–æ—Ä–∞ –≤—Ä–µ–º–µ–Ω–∏ —É–¥–∞–ª–µ–Ω –∏–∑ —Å—Ç–∏–ª–µ–π, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω */

        .item-card {
            display: flex; padding: 12px 16px; gap: 12px;
            border-bottom: 0.5px solid rgba(0,0,0,0.05); align-items: center;
        }

        .item-img {
            width: 80px; height: 80px; border-radius: 10px;
            background-color: var(--secondary-bg);
            background-size: cover; background-position: center; flex-shrink: 0;
        }

        .item-info { flex-grow: 1; }
        .item-title { font-size: 16px; font-weight: 500; margin-bottom: 4px; }
        .item-desc { font-size: 13px; color: var(--hint-color); line-height: 1.2; }

        .item-controls { display: flex; flex-direction: column; align-items: flex-end; gap: 8px; min-width: 80px; }

        .price { font-weight: 600; font-size: 15px; }

        .add-btn {
            background-color: var(--secondary-bg); color: var(--link-color); border: none;
            padding: 5px 15px; border-radius: 14px; font-weight: 600; font-size: 14px;
            cursor: pointer;
        }

        .counter {
            display: none; align-items: center; background-color: var(--button-color);
            color: var(--button-text); border-radius: 14px; padding: 3px;
        }
        .counter button {
            background: none; border: none; color: var(--button-text);
            font-size: 18px; font-weight: bold; width: 30px; height: 24px; cursor: pointer;
        }
        .count-num { width: 20px; text-align: center; font-weight: 600; }

        .bottom-space { height: 100px; }
    </style>
</head>
<body>

<header>–®–∞—É—Ä–º–∞ –•–∞–±</header>
<div class="nav-tabs" id="nav-tabs"></div>

<div id="menu-list"></div>
<div class="bottom-space"></div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();
    tg.MainButton.hide();

    // 1. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
    const categories = {
        'shawarma': 'üåØ –®–∞—É—Ä–º–∞',
        'sandwiches': 'ü•™ –°—ç–Ω–¥–≤–∏—á–∏',
        'burgers': 'üçî –ë—É—Ä–≥–µ—Ä—ã',
        'hotdogs': 'üå≠ –•–æ—Ç-–¥–æ–≥–∏',
        'snacks': 'üçü –ó–∞–∫—É—Å–∫–∏',
        'bbq': 'üî• –ú–∞–Ω–≥–∞–ª & –°—É–ø—ã'
    };

    // 2. –í—Å–µ —Ç–æ–≤–∞—Ä—ã (–¥–∞–Ω–Ω—ã–µ –∏–∑ –≤–∞—à–µ–≥–æ —Å—Ç–∞—Ä–æ–≥–æ —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã —Å—é–¥–∞)
    const menuItems = [
        // –®–∞—É—Ä–º–∞
        { id: "sh_kur_st", category: "shawarma", title: "–®–∞—É—Ä–º–∞ –∫—É—Ä–∏—Ü–∞ (–°—Ç–∞–Ω–¥–∞—Ä—Ç)", price: 290, desc: "390–≥. –û–≤–æ—â–∏, —Å–æ—É—Å—ã, –∫–æ—Ä–µ–π—Å–∫–∞—è –º–æ—Ä–∫–æ–≤—å", image: "" },
        { id: "sh_kur_big", category: "shawarma", title: "–®–∞—É—Ä–º–∞ –∫—É—Ä–∏—Ü–∞ (–ë–æ–ª—å—à–∞—è)", price: 350, desc: "500–≥. –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –ø–æ—Ä—Ü–∏—è", image: "" },
        { id: "sh_svin_st", category: "shawarma", title: "–®–∞—É—Ä–º–∞ —Å–≤–∏–Ω–∏–Ω–∞ (–°—Ç–∞–Ω–¥–∞—Ä—Ç)", price: 320, desc: "390–≥. –û–≤–æ—â–∏, —Å–æ—É—Å—ã, –º–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–π –ª—É–∫", image: "" },
        { id: "sh_svin_big", category: "shawarma", title: "–®–∞—É—Ä–º–∞ —Å–≤–∏–Ω–∏–Ω–∞ (–ë–æ–ª—å—à–∞—è)", price: 390, desc: "500–≥. –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è –ø–æ—Ä—Ü–∏—è", image: "" },
        { id: "sh_skum", category: "shawarma", title: "–®–∞—É—Ä–º–∞ —Å–∫—É–º–±—Ä–∏—è", price: 340, desc: "355–≥. –°–∫—É–º–±—Ä–∏—è –∑–∞–ø–µ—á–µ–Ω–Ω–∞—è, —Ç–µ—Ä–∏—è–∫–∏", image: "" },
        { id: "sh_hab", category: "shawarma", title: "üåü –®–∞—É—Ä–º–∞ –•–ê–ë", price: 390, desc: "330–≥. –û–≤–æ—â–∏ –≥—Ä–∏–ª—å, –∞–¥–∂–∏–∫–∞, —Å–æ—É—Å —Ñ–µ—Ç–∞", image: "" },
        
        // –°—ç–Ω–¥–≤–∏—á–∏
        { id: "burrito", category: "sandwiches", title: "–ë—É—Ä—Ä–∏—Ç–æ", price: 450, desc: "300–≥. –ö—É—Ä–∏—Ü–∞, —Ñ–∞—Å–æ–ª—å, —Ö–∞–ª–∞–ø–µ–Ω—å–æ, –ø–µ—Ä–µ—Ü, —Å—ã—Ä", image: "" },
        { id: "tort_krev", category: "sandwiches", title: "–¢–æ—Ä—Ç–∏–ª—å—è –∫—Ä–µ–≤–µ—Ç–∫–∏", price: 370, desc: "150–≥. –ö—Ä–µ–≤–µ—Ç–∫–∏ –ø–∞–Ω–∫–æ, —Ç–æ–º–∞—Ç, –≤–∞—Å–∞–±–∏", image: "" },
        { id: "snd_los", category: "sandwiches", title: "–°—ç–Ω–¥–≤–∏—á –ª–æ—Å–æ—Å—å", price: 320, desc: "200–≥. –õ–æ—Å–æ—Å—å —Å/—Å, —Å–ª–∏–≤–æ—á–Ω—ã–π —Å—ã—Ä", image: "" },
        { id: "snd_kur", category: "sandwiches", title: "–°—ç–Ω–¥–≤–∏—á –∫—É—Ä–∏—Ü–∞", price: 270, desc: "245–≥. –ö–æ–ø—á–µ–Ω–∞—è –∫—É—Ä–∏—Ü–∞, –æ–≤–æ—â–∏, —Ü–µ–∑–∞—Ä—å", image: "" },
        
        // –ë—É—Ä–≥–µ—Ä—ã
        { id: "br_tiftik", category: "burgers", title: "–¢–∏—Ñ—Ç–∏–∫ –±—É—Ä–≥–µ—Ä", price: 570, desc: "280–≥. –†–≤–∞–Ω–∞—è –≥–æ–≤—è–¥–∏–Ω–∞, –º–æ—Ü–∞—Ä–µ–ª–ª–∞", image: "" },
        { id: "br_black", category: "burgers", title: "–ë—É—Ä–≥–µ—Ä –ë–ª—ç–∫", price: 460, desc: "315–≥. –ö–æ—Ç–ª–µ—Ç–∞ —Å–≤–∏–Ω–æ-–≥–æ–≤—è–∂—å—è, —Å—ã—Ä", image: "" },
        { id: "br_ananas", category: "burgers", title: "–ë—É—Ä–≥–µ—Ä –ê–Ω–∞–Ω–∞—Å", price: 520, desc: "380–≥. –ö–æ—Ç–ª–µ—Ç–∞ –≥–æ–≤—è–∂—å—è, –∞–Ω–∞–Ω–∞—Å", image: "" },
        { id: "br_chkalov", category: "burgers", title: "–ë—É—Ä–≥–µ—Ä –ß–∫–∞–ª–æ–≤—Å–∫–∏–π", price: 540, desc: "400–≥. –ö—É—Ä–∏—Ü–∞, —Å—ã—Ä, –∫–∞—Ä—Ä–∏", image: "" },
        
        // –•–æ—Ç-–¥–æ–≥–∏
        { id: "hd_cl", category: "hotdogs", title: "–•–æ—Ç-–¥–æ–≥ –∫–ª–∞—Å—Å–∏–∫", price: 320, desc: "185–≥. –°–æ—Å–∏—Å–∫–∞, —Å—ã—Ä, –æ–≤–æ—â–∏, —Å–æ—É—Å—ã", image: "" },
        { id: "hd_fr", category: "hotdogs", title: "–§—Ä–µ–Ω—á-–¥–æ–≥ –∫—É—Ä–∏—Ü–∞", price: 270, desc: "150–≥. –õ—É–∫ —Å—É—à–µ–Ω—ã–π, —Å–æ—É—Å—ã", image: "" },
        { id: "hd_corn", category: "hotdogs", title: "–ö–æ—Ä–Ω-–¥–æ–≥", price: 370, desc: "100–≥. –°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ, —Å—ã—Ä", image: "" },
        
        // –ó–∞–∫—É—Å–∫–∏
        { id: "z_fri", category: "snacks", title: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å —Ñ—Ä–∏", price: 130, desc: "100–≥. –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Ñ—Ä–∏", image: "" },
        { id: "z_dolki", category: "snacks", title: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–µ –¥–æ–ª—å–∫–∏", price: 160, desc: "130–≥. –°–æ —Å–ø–µ—Ü–∏—è–º–∏", image: "" },
        { id: "z_nag", category: "snacks", title: "–ù–∞–≥–≥–µ—Ç—Å—ã (6 —à—Ç)", price: 190, desc: "–ö—É—Ä–∏–Ω–æ–µ —Ñ–∏–ª–µ –≤ –ø–∞–Ω–∏—Ä–æ–≤–∫–µ", image: "" },
        { id: "z_balls", category: "snacks", title: "–°—ã—Ä–Ω—ã–µ —à–∞—Ä–∏–∫–∏ (6 —à—Ç)", price: 230, desc: "–¢—è–≥—É—á–∏–π —Å—ã—Ä –≤–Ω—É—Ç—Ä–∏", image: "" },
        { id: "z_shamp", category: "snacks", title: "–®–∞–º–ø–∏–Ω—å–æ–Ω—ã –ø–∞–Ω–∫–æ", price: 220, desc: "6 —à—Ç. –•—Ä—É—Å—Ç—è—â–∏–µ –≥—Ä–∏–±—ã", image: "" },
        
        // –ú–∞–Ω–≥–∞–ª –∏ –°—É–ø—ã
        { id: "m_sh_sv", category: "bbq", title: "–®–∞—à–ª—ã–∫ —Å–≤–∏–Ω–∏–Ω–∞", price: 490, desc: "250/80–≥.", image: "" },
        { id: "m_lulya", category: "bbq", title: "–õ—é–ª—è –∫—É—Ä–∏–Ω—ã–µ", price: 260, desc: "125/70–≥.", image: "" },
        { id: "s_grib", category: "bbq", title: "–°—É–ø-–ø—é—Ä–µ –≥—Ä–∏–±–Ω–æ–π", price: 350, desc: "210–≥.", image: "" },
        { id: "s_kur", category: "bbq", title: "–õ–∞–ø—à–∞ –∫—É—Ä–∏–Ω–∞—è", price: 210, desc: "290–≥.", image: "" }
    ];

    let cart = {};

    function render() {
        const nav = document.getElementById('nav-tabs');
        const list = document.getElementById('menu-list');
        nav.innerHTML = '';
        list.innerHTML = '';
        
        // –°–æ–∑–¥–∞–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é –∏ —Å–ø–∏—Å–∫–∏
        Object.entries(categories).forEach(([catId, catName]) => {
            // –ö–Ω–æ–ø–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            nav.innerHTML += `<a href="#cat-${catId}" class="nav-btn" onclick="highlightNav(this)">${catName}</a>`;
            
            // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            list.innerHTML += `<div id="cat-${catId}" class="section-anchor"><div class="category-header">${catName}</div></div>`;
            
            // –¢–æ–≤–∞—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            const items = menuItems.filter(i => i.category === catId);
            
            items.forEach(item => {
                // –ï—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ—Ç, —Ñ–æ–Ω –±—É–¥–µ—Ç —Å–µ—Ä—ã–º
                const imgStyle = item.image ? `style="background-image: url('${item.image}')"` : '';
                
                list.innerHTML += `
                    <div class="item-card">
                        <div class="item-img" ${imgStyle}></div>
                        <div class="item-info">
                            <div class="item-title">${item.title}</div>
                            <div class="item-desc">${item.desc || ''}</div>
                        </div>
                        <div class="item-controls">
                            <div class="price">${item.price} ‚ÇΩ</div>
                            <button class="add-btn" id="add-${item.id}" onclick="updateCart('${item.id}', 1)">–î–æ–±–∞–≤–∏—Ç—å</button>
                            <div class="counter" id="cnt-${item.id}">
                                <button onclick="updateCart('${item.id}', -1)">‚àí</button>
                                <span class="count-num" id="num-${item.id}">0</span>
                                <button onclick="updateCart('${item.id}', 1)">+</button>
                            </div>
                        </div>
                    </div>`;
            });
        });

        // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–µ—Ä–≤—É—é –∫–Ω–æ–ø–∫—É
        if (document.querySelector('.nav-btn')) {
            document.querySelector('.nav-btn').classList.add('active');
        }
    }

    function highlightNav(el) {
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        el.classList.add('active');
        tg.HapticFeedback.impactOccurred('light');
    }

    function updateCart(id, delta) {
        const itemId = String(id);
        cart[itemId] = (cart[itemId] || 0) + delta;

        const addBtn = document.getElementById(`add-${itemId}`);
        const counter = document.getElementById(`cnt-${itemId}`);
        const num = document.getElementById(`num-${itemId}`);

        if (cart[itemId] > 0) {
            if (addBtn) addBtn.style.display = 'none';
            if (counter) counter.style.display = 'flex';
            if (num) num.innerText = cart[itemId];
        } else {
            delete cart[itemId];
            if (addBtn) addBtn.style.display = 'block';
            if (counter) counter.style.display = 'none';
        }
        
        tg.HapticFeedback.selectionChanged();
        updateMainBtn(); 
    }

    function updateMainBtn() {
        let total = 0;
        let hasItems = false;

        for (const id in cart) {
            const count = cart[id];
            const item = menuItems.find(i => String(i.id) === String(id));
            if (item && count > 0) {
                total += item.price * count;
                hasItems = true;
            }
        }

        if (hasItems && total > 0) {
            tg.MainButton.setParams({
                text: `–û–§–û–†–ú–ò–¢–¨ –ó–ê–ö–ê–ó ‚Äî ${total} ‚ÇΩ`,
                is_visible: true,
                is_active: true,
                color: tg.themeParams.button_color || '#248b91'
            });
        } else {
            tg.MainButton.hide();
        }
    }

    function onConfirm() {
        tg.MainButton.showProgress();

        const order = [];
        let finalTotal = 0;

        for (const id in cart) {
            const count = cart[id];
            const item = menuItems.find(i => String(i.id) === String(id));
            if (item && count > 0) {
                finalTotal += item.price * count;
                order.push({
                    title: item.title,
                    count: count,
                    price: item.price
                });
            }
        }

        if (order.length === 0) {
            tg.MainButton.hideProgress();
            return;
        }

        // –î–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–æ—Ç—É
        const payload = JSON.stringify({
            order: order,
            totalPrice: finalTotal,
            time: "üöÄ –ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ" // –í—à–∏—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
        });

        tg.sendData(payload);
        
        setTimeout(() => {
            tg.close();
        }, 200);
    }

    tg.onEvent('mainButtonClicked', onConfirm);
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º —Ä–µ–Ω–¥–µ—Ä
    render();
</script>

</body>
</html>
