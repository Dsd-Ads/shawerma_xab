<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–®–∞—É—Ä–º–∞ –•–∞–± - –ú–µ–Ω—é</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --tg-theme-bg-color: #ffffff;
            --tg-theme-secondary-bg-color: #f5f5f5;
            --tg-theme-button-color: #248b91;
            --tg-theme-text-color: #222222;
            --tg-theme-hint-color: #707579;
        }
        body { font-family: -apple-system, sans-serif; background: var(--tg-theme-bg-color); color: var(--tg-theme-text-color); margin: 0; padding: 10px; padding-bottom: 100px; }
        .category { font-size: 1rem; font-weight: 800; text-transform: uppercase; color: var(--tg-theme-button-color); margin: 25px 0 10px; border-bottom: 2px solid; padding-bottom: 5px; }
        .item-card { background: var(--tg-theme-secondary-bg-color); border-radius: 12px; padding: 12px; margin-bottom: 10px; border: 1px solid transparent; }
        .item-header { display: flex; justify-content: space-between; font-weight: bold; }
        .item-desc { font-size: 0.75rem; color: var(--tg-theme-hint-color); margin: 4px 0; }
        .controls { display: flex; align-items: center; justify-content: space-between; margin-top: 10px; }
        .qty-box { display: flex; align-items: center; gap: 15px; }
        .btn-qty { background: var(--tg-theme-button-color); color: white; border: none; border-radius: 6px; width: 34px; height: 34px; font-size: 1.2rem; cursor: pointer; }
        .addon-block { display: none; margin-top: 10px; padding-top: 10px; border-top: 1px solid #ddd; }
        .addons-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; font-size: 0.75rem; }
        textarea { width: 100%; box-sizing: border-box; margin-top: 8px; border-radius: 8px; border: 1px solid #ccc; padding: 8px; font-size: 0.8rem; resize: none; font-family: inherit; }
        .price { font-weight: 900; color: var(--tg-theme-button-color); }
    </style>
</head>
<body>

<div id="menu-container"></div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    const menuData = [
        {
            category: "üåØ –®–∞—É—Ä–º–∞",
            items: [
                { id: "sh_kur_st", name: "–®–∞—É—Ä–º–∞ –ö—É—Ä–∏—Ü–∞ (–°—Ç–∞–Ω–¥–∞—Ä—Ç)", price: 290, desc: "–û–≤–æ—â–∏, —Å–æ—É—Å—ã, –∫–æ—Ä–µ–π—Å–∫–∞—è –º–æ—Ä–∫–æ–≤—å" },
                { id: "sh_kur_big", name: "–®–∞—É—Ä–º–∞ –ö—É—Ä–∏—Ü–∞ (–ë–æ–ª—å—à–∞—è)", price: 350, desc: "–û–≤–æ—â–∏, —Å–æ—É—Å—ã, –∫–æ—Ä–µ–π—Å–∫–∞—è –º–æ—Ä–∫–æ–≤—å" },
                { id: "sh_svin_st", name: "–®–∞—É—Ä–º–∞ –°–≤–∏–Ω–∏–Ω–∞ (–°—Ç–∞–Ω–¥–∞—Ä—Ç)", price: 320, desc: "–ö–∞–ø—É—Å—Ç–∞, –æ–≤–æ—â–∏, –º–∞—Ä–∏–Ω–æ–≤. –ª—É–∫" },
                { id: "sh_svin_big", name: "–®–∞—É—Ä–º–∞ –°–≤–∏–Ω–∏–Ω–∞ (–ë–æ–ª—å—à–∞—è)", price: 380, desc: "–ö–∞–ø—É—Å—Ç–∞, –æ–≤–æ—â–∏, –º–∞—Ä–∏–Ω–æ–≤. –ª—É–∫" },
                { id: "sh_hub", name: "üåü –®–∞—É—Ä–º–∞ –•–ê–ë", price: 390, desc: "–ö—É—Ä–∏—Ü–∞, –æ–≤–æ—â–∏ –Ω–∞ –º–∞–Ω–≥–∞–ª–µ, –∞–¥–∂–∏–∫–∞, —Ñ–µ—Ç–∞" },
                { id: "sh_fish", name: "üêü –®–∞—É—Ä–º–∞ –°–∫—É–º–±—Ä–∏—è", price: 340, desc: "–ó–∞–ø–µ—á–µ–Ω–Ω–∞—è —Å–∫—É–º–±—Ä–∏—è, —Ç–µ—Ä–∏—è–∫–∏, –æ–≤–æ—â–∏" }
            ]
        },
        {
            category: "üçî –ë—É—Ä–≥–µ—Ä—ã & –§–∞—Å—Ç-—Ñ—É–¥",
            items: [
                { id: "brg_black", name: "–ë—É—Ä–≥–µ—Ä –ë–ª—ç–∫", price: 460, desc: "–°–≤–∏–Ω–æ-–≥–æ–≤—è–∂—å—è –∫–æ—Ç–ª–µ—Ç–∞, –æ–≤–æ—â–∏" },
                { id: "brg_tiftik", name: "–¢–∏—Ñ—Ç–∏–∫ –ë—É—Ä–≥–µ—Ä", price: 570, desc: "–†–≤–∞–Ω–∞—è –≥–æ–≤—è–¥–∏–Ω–∞, –º–æ—Ü–∞—Ä–µ–ª–ª–∞" },
                { id: "burrito", name: "–ë—É—Ä—Ä–∏—Ç–æ", price: 450, desc: "–ö—É—Ä–∏—Ü–∞, —Ñ–∞—Å–æ–ª—å, —Ö–∞–ª–∞–ø–µ–Ω—å–æ, —Å—ã—Ä" },
                { id: "hotdog_cl", name: "–•–æ—Ç-–î–æ–≥ –ö–ª–∞—Å—Å–∏–∫", price: 190, desc: "–°–æ—Å–∏—Å–∫–∞, –±—É–ª–∫–∞, –∫–µ—Ç—á—É–ø, –≥–æ—Ä—á–∏—Ü–∞" },
                { id: "hotdog_fr", name: "–•–æ—Ç-–î–æ–≥ –§—Ä–µ–Ω—á", price: 210, desc: "–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∞—è –±—É–ª–æ—á–∫–∞, —Å–æ—Å–∏—Å–∫–∞" }
            ]
        },
        {
            category: "üî• –ú–∞–Ω–≥–∞–ª & –ó–∞–∫—É—Å–∫–∏",
            items: [
                { id: "m_bedro", name: "–®–∞—à–ª—ã–∫ –ö—É—Ä–∏–Ω–æ–µ –±–µ–¥—Ä–æ", price: 440, desc: "250/80 –≥ –ø–æ—Ä—Ü–∏—è" },
                { id: "m_svin", name: "–®–∞—à–ª—ã–∫ –°–≤–∏–Ω–∏–Ω–∞", price: 490, desc: "250/80 –≥ –ø–æ—Ä—Ü–∏—è" },
                { id: "m_lulya", name: "–õ—é–ª—è –∫—É—Ä–∏–Ω—ã–µ", price: 260, desc: "125/70 –≥" },
                { id: "fries", name: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å –§—Ä–∏", price: 130, desc: "–ü–æ—Ä—Ü–∏—è 100–≥" }
            ]
        },
        {
            category: "ü•ó –°–∞–ª–∞—Ç—ã & –ë–æ—É–ª—ã",
            items: [
                { id: "b_salmon", name: "–ë–æ—É–ª –õ–æ—Å–æ—Å—å", price: 480, desc: "–õ–æ—Å–æ—Å—å —Å/—Å, —Ä–∏—Å, –∞–≤–æ–∫–∞–¥–æ, —á—É–∫–∞" },
                { id: "s_cezar", name: "–¶–µ–∑–∞—Ä—å —Å –∫—É—Ä–∏—Ü–µ–π", price: 360, desc: "–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–∞–ª–∞—Ç" }
            ]
        },
        {
            category: "üéÅ –ö–æ–º–±–æ –û–±–µ–¥—ã",
            items: [
                { id: "c1", name: "–ö–æ–º–±–æ ‚Ññ1 (–•–æ—Ç-–¥–æ–≥)", price: 500, desc: "–•–æ—Ç-–¥–æ–≥, —Ñ—Ä–∏, –Ω–∞–ø–∏—Ç–æ–∫, —Å–æ—É—Å" },
                { id: "c2", name: "–ö–æ–º–±–æ ‚Ññ2 (–ë—É—Ä–≥–µ—Ä)", price: 550, desc: "–ë–ª—ç–∫ –±—É—Ä–≥–µ—Ä, —Ö–∞—à–±—Ä–∞—É–Ω, –Ω–∞–ø–∏—Ç–æ–∫" },
                { id: "c3", name: "–ö–æ–º–±–æ ‚Ññ3 (–®–∞—É—Ä–º–∞)", price: 520, desc: "–®–∞—É—Ä–º–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç, —Ñ—Ä–∏, –Ω–∞–ø–∏—Ç–æ–∫" }
            ]
        },
        {
            category: "‚òïÔ∏è –ù–∞–ø–∏—Ç–∫–∏ & –î–µ—Å–µ—Ä—Ç—ã",
            items: [
                { id: "d_trub", name: "–í–∞—Ñ–µ–ª—å–Ω–∞—è —Ç—Ä—É–±–æ—á–∫–∞", price: 150, desc: "–°–æ —Å–≥—É—â–µ–Ω–∫–æ–π" },
                { id: "n_lim", name: "–õ–∏–º–æ–Ω–∞–¥", price: 170, desc: "350 –º–ª" },
                { id: "n_latte", name: "–õ–∞—Ç—Ç–µ / –ö–∞–ø—É—á–∏–Ω–æ", price: 190, desc: "220 –º–ª" }
            ]
        }
    ];

    const addons = [
        { n: "üßÄ –°—ã—Ä", p: 40 },
        { n: "üî• –•–∞–ª–∞–ø–µ–Ω—å–æ", p: 30 },
        { n: "üçü –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å", p: 30 },
        { n: "ü•í –û–≥—É—Ä–µ—Ü –º–∞—Ä.", p: 20 },
        { n: "ü´í –ú–∞—Å–ª–∏–Ω—ã", p: 40 },
        { n: "üåΩ –ö—É–∫—É—Ä—É–∑–∞", p: 20 }
    ];

    let cart = {};

    function renderMenu() {
        const container = document.getElementById('menu-container');
        menuData.forEach(cat => {
            const catHeader = document.createElement('div');
            catHeader.className = 'category';
            catHeader.innerText = cat.category;
            container.appendChild(catHeader);

            cat.items.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'item-card';
                itemDiv.dataset.id = item.id;
                itemDiv.innerHTML = `
                    <div class="item-header"><span>${item.name}</span><span class="price">${item.price}‚ÇΩ</span></div>
                    <div class="item-desc">${item.desc}</div>
                    <div class="controls">
                        <div class="qty-box">
                            <button class="btn-qty" onclick="updateQty('${item.id}', -1, ${item.price})">-</button>
                            <span id="q-${item.id}">0</span>
                            <button class="btn-qty" onclick="updateQty('${item.id}', 1, ${item.price})">+</button>
                        </div>
                    </div>
                    <div class="addon-block" id="ab-${item.id}">
                        <div class="addons-grid">
                            ${addons.map(a => `<label><input type="checkbox" class="cb" data-n="${a.n}" data-p="${a.p}" onchange="calc()"> ${a.n} (+${a.p}‚ÇΩ)</label>`).join('')}
                        </div>
                        <textarea placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –±–ª—é–¥—É..."></textarea>
                    </div>
                `;
                container.appendChild(itemDiv);
            });
        });
    }

    function updateQty(id, delta, price) {
        if (!cart[id]) {
            const el = document.querySelector(`[data-id="${id}"]`);
            cart[id] = { qty: 0, name: el.querySelector('.item-header span').innerText, price: price };
        }
        cart[id].qty += delta;
        if (cart[id].qty < 0) cart[id].qty = 0;
        
        document.getElementById(`q-${id}`).innerText = cart[id].qty;
        document.getElementById(`ab-${id}`).style.display = cart[id].qty > 0 ? 'block' : 'none';
        calc();
    }

    function calc() {
        let total = 0;
        let hasItems = false;
        for (let id in cart) {
            if (cart[id].qty > 0) {
                total += cart[id].qty * cart[id].price;
                const card = document.querySelector(`[data-id="${id}"]`);
                card.querySelectorAll('.cb:checked').forEach(cb => total += parseInt(cb.dataset.p));
                hasItems = true;
            }
        }
        if (hasItems) {
            tg.MainButton.setText(`–û–§–û–†–ú–ò–¢–¨ –ó–ê–ö–ê–ó (${total}‚ÇΩ)`);
            tg.MainButton.show();
        } else {
            tg.MainButton.hide();
        }
    }

    tg.onEvent('mainButtonClicked', () => {
        let order = [];
        for (let id in cart) {
            if (cart[id].qty > 0) {
                const card = document.querySelector(`[data-id="${id}"]`);
                order.push({
                    name: cart[id].name,
                    qty: cart[id].qty,
                    addons: Array.from(card.querySelectorAll('.cb:checked')).map(cb => cb.dataset.n),
                    comment: card.querySelector('textarea').value
                });
            }
        }
        if (order.length > 0) {
            tg.sendData(JSON.stringify(order));
            tg.close();
        }
    });

    renderMenu();
</script>
</body>
</html>
